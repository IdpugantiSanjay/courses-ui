<div class="container" *ngIf="course">
  <div class="course">
    <div class="course__name">
      {{ course.name }}
    </div>
    <div class="course__meta">
      <div class="course__meta__duration">
        <div>
          <svg class="clock-icon" width="24" height="24" viewBox="0 0 16 16" fill="none"
               xmlns="http://www.w3.org/2000/svg">
            <g clip-path="url(#clip0_1_48)">
              <path fill-rule="evenodd" clip-rule="evenodd"
                    d="M7 0C5.61553 0 4.26216 0.410543 3.11101 1.17971C1.95987 1.94888 1.06266 3.04213 0.532846 4.32122C0.00303304 5.6003 -0.13559 7.00776 0.134506 8.36563C0.404603 9.7235 1.07129 10.9708 2.05026 11.9497C3.02922 12.9287 4.2765 13.5954 5.63437 13.8655C6.99224 14.1356 8.3997 13.997 9.67879 13.4672C10.9579 12.9373 12.0511 12.0401 12.8203 10.889C13.5895 9.73785 14 8.38447 14 7C14 5.14348 13.2625 3.36301 11.9497 2.05025C10.637 0.737498 8.85652 0 7 0ZM10.15 8.4H7.006C6.77593 8.39369 6.55702 8.29948 6.39427 8.13673C6.23152 7.97399 6.13731 7.75507 6.131 7.525V3.509C6.131 3.27694 6.22319 3.05438 6.38728 2.89028C6.55138 2.72619 6.77394 2.634 7.006 2.634C7.23807 2.634 7.46063 2.72619 7.62472 2.89028C7.78882 3.05438 7.881 3.27694 7.881 3.509V6.646H10.15C10.3821 6.646 10.6046 6.73819 10.7687 6.90228C10.9328 7.06638 11.025 7.28894 11.025 7.521C11.025 7.75306 10.9328 7.97562 10.7687 8.13972C10.6046 8.30381 10.3821 8.396 10.15 8.396V8.4Z"
              />
            </g>
            <defs>
              <clipPath id="clip0_1_48">
                <rect width="16" height="16" fill="white"/>
              </clipPath>
            </defs>
          </svg>
        </div>
        <div>
          {{ course.duration }}
        </div>
      </div>
      <div class="course__meta__watchInfo">
        Watched: {{ watchedInfo?.watchedCount || 0 }} / {{ course.entries!.length }}
      </div>
      <div class="course__meta__progress">
          <span>
            Progress
          </span>
        <span>
            <input type="range" max="100" [value]="watchedInfo?.progress" disabled>
          </span>
        <span>
          {{ formattedProgress }}%
        </span>
      </div>
    </div>
    <div class="course__tags">
      <div id="chips" #chips>
        <div *ngFor="let tag of addedTags" class="chip">
          <span>{{ tag }}</span>
          <span (click)="removeTag(tag)" class="chip__container">
                    <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd"
      d="M9.43 2.483L6.9 5.011L4.37 2.481C4.23671 2.34218 4.07704 2.23137 3.90037 2.15506C3.7237 2.07874 3.53357 2.03847 3.34113 2.03658C3.14868 2.0347 2.9578 2.07125 2.77967 2.14409C2.60154 2.21694 2.43974 2.32461 2.30376 2.46079C2.16777 2.59697 2.06034 2.75893 1.98776 2.93717C1.91518 3.11541 1.87891 3.30634 1.88107 3.49878C1.88324 3.69122 1.9238 3.88129 2.00037 4.05785C2.07694 4.23441 2.18799 4.39391 2.327 4.527L4.856 7.057L2.329 9.584C2.06481 9.85697 1.91846 10.2228 1.92152 10.6027C1.92457 10.9825 2.07678 11.346 2.34533 11.6147C2.61388 11.8834 2.97726 12.0357 3.35712 12.039C3.73698 12.0422 4.10291 11.8961 4.376 11.632L6.9 9.1L9.428 11.629C9.5614 11.7675 9.72108 11.8781 9.8977 11.9542C10.0743 12.0304 10.2644 12.0705 10.4567 12.0723C10.649 12.0741 10.8397 12.0376 11.0178 11.9648C11.1958 11.8921 11.3576 11.7846 11.4936 11.6486C11.6296 11.5126 11.7371 11.3508 11.8098 11.1728C11.8826 10.9948 11.9191 10.804 11.9173 10.6117C11.9155 10.4194 11.8753 10.2293 11.7992 10.0527C11.7231 9.87608 11.6125 9.7164 11.474 9.583L8.95 7.058L11.477 4.531C11.7412 4.25804 11.8875 3.89219 11.8845 3.51232C11.8814 3.13245 11.7292 2.769 11.4607 2.50032C11.1921 2.23164 10.8287 2.07926 10.4489 2.07602C10.069 2.07278 9.70309 2.21894 9.43 2.483Z"
/>
</svg>
                  </span>
        </div>
      </div>
      <label>
          <span class="label-text">
            Tags:
          </span>
        <input list="tags" id="tagsInput" (change)="addTagIfExist()" [(ngModel)]="tag" [placeholder]="tagsPlaceholder"
               [disabled]="addedTags.length == 3">
        <datalist id="tags">
          <option [value]="tag.name" *ngFor="let tag of tags"></option>
        </datalist>
      </label>

    </div>
    <div class="filters">
      <label>
        <span>
        Search:
        </span>
        <input type="text" [formControl]="search" autofocus>
      </label>
    </div>
    <div *ngIf="hasSections; else sectionLess">
      <details *ngFor="let section of sections" class="course__section">
        <summary class="course__section__name">{{ section }}</summary>
        <app-course-entry-list class="course__section__entries" [entries]="sectionEntries(section)"
                               (notes)="router.navigate(['/courses', this.course.id, $event.entryId, 'notes'])"
                               (toggleWatched)="toggleWatched($event)"></app-course-entry-list>
      </details>
    </div>


    <ng-template #sectionLess>
      <app-course-entry-list [entries]="filteredCourseEntries"
                             (notes)="router.navigate(['/courses', this.course.id, $event.entryId, 'notes'])"
                             (toggleWatched)="toggleWatched($event)"></app-course-entry-list>
    </ng-template>
  </div>
</div>
